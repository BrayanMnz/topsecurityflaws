package org.vilojona;

import static org.junit.jupiter.api.Assertions.assertTrue;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;

import org.junit.jupiter.api.Test;
import org.vilojona.topsecurityflaws.common.User;
import org.vilojona.topsecurityflaws.deserialization.Exploit;

import io.quarkus.test.junit.QuarkusTest;

@QuarkusTest
class ExploitTest {
    @Test
    void testExploit() throws IOException {
        Exploit exploit = new Exploit();
        FileOutputStream fileOut = new FileOutputStream("exploit.ser");
        try (ObjectOutputStream out = new ObjectOutputStream(fileOut)) {
            out.writeObject(exploit);
        }
        assertTrue(true);
    }    
    
    @Test
    void testUser() throws IOException {
        User user = new User();
        user.setName("antonio");
        user.setPassword("ninguno");
        FileOutputStream fileOut = new FileOutputStream("user.ser");
        try (ObjectOutputStream out = new ObjectOutputStream(fileOut)) {
            out.writeObject(user);
        }
        assertTrue(true);
    }
}
